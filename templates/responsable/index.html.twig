{% extends 'base.html.twig' %}

{% block title %}Responsable index{% endblock %}

{% block body %}
    <h1 class="page-title">Liste des responsables</h1>

    <br>
    <br>

    <form method="get" action="" style="margin-bottom:20px; display:flex; gap:10px;">
        <input 
            type="text"
            name="q"
            placeholder="Rechercher..."
            value="{{ app.request.get('q') }}"
            class="form-control"
            style="max-width:300px;"
        >
        <button type="submit" class="btn btn-primary">
            Rechercher
        </button>
    </form>


    <table class="table">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Prenom</th>
                <th>Copos</th>
                <th>Ville</th>
                <th>Tel</th>
                <th>Mail</th>
                <th>Quotient</th>
                <th>Actions</th>
            </tr>
        </thead>
     <tbody>
        {% for responsable in responsables %}
        {# On applique le onclick sur la balise TR unique #}
        <tr onclick="window.location='{{ path('app_responsable_show', {'id': responsable.id}) }}'" style="cursor: pointer;">
            <td>{{ responsable.nom }}</td>
            <td>{{ responsable.prenom }}</td>
            <td>{{ responsable.copos }}</td>
            <td>{{ responsable.ville }}</td>
            <td>{{ responsable.tel }}</td>
            <td>{{ responsable.mail }}</td>
            
            {# Affichage sécurisé du quotient #}
            <td>{{ responsable.quotient ? responsable.quotient.libelle : '' }}</td>
            
            <td>
                
                <a href="{{ path('app_responsable_show', {'id': responsable.id}) }}" class="btn btn-small">Voir</a>
                    <a href="{{ path('app_responsable_edit', {'id': responsable.id}) }}" class="btn btn-sm btn-primary">Editer</a>
            </td>
        </tr>
        {% else %}
        <tr>
            {# Ajusté à 8 colonnes pour correspondre à votre tableau #}
            <td colspan="8">no records found</td>
        </tr>
        {% endfor %}
    </tbody>
    </table>

   
{% endblock %}